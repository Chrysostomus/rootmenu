#!/bin/bash
#Setup and source configurationfile
if ! [ -f "$HOME/.rootmenurc" ]; then
	cat > $HOME/.rootmenurc <<EOL
button1action="dboxmenu"
button2action="BspwmWindowMenu"
button3action="BspwmDesktopMenu"
button4action="bspc desktop -f next"
button5action="bspc desktop -f prev"
EOL
fi
. $HOME/.rootmenurc

#monitor events with xev and act accordingly
xev -root -event button | awk 'BEGIN { RS=""; } /ButtonPress/ { print +$20; fflush(); }' | while read button; do
    case $button in
        # occurs on clicking desktop
        1) $button1action ;;
        2) $button2action ;;
        3) $button3action ;;
        4) $button4action ;;
        5) $button5action ;;
    esac
done
