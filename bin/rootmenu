#!/bin/dash
#Setup and source configurationfile
if ! [ -f "$HOME/.rootmenurc" ]; then
	cat > $HOME/.rootmenurc <<EOL
button1action=""
button2action="BspwmWindowMenu"
button3action="dboxmenu"
button4action="bspc desktop -f next"
button5action="bspc desktop -f prev"
EOL
fi
. $HOME/.rootmenurc

#monitor events with xev and act accordingly
xev -root -event button | awk '
BEGIN { RS=""; }
/ButtonPress/ {
   switch(+$20) {
	 case "1": system("'" $button1action "'"); break;
	 case "2": system("'" $button2action "'"); break;
	 case "3": system("'" $button3action "'"); break;
	 case "4": system("'" $button4action "'"); break;
	 case "5": system("'" $button5action "'"); break;
   }
}'
