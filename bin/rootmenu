#!/bin/bash
#Setup and source configurationfile
if ! [ -f "$HOME/.rootmenurc" ]; then
	cat > $HOME/.rootmenurc <<EOL
button1action="dboxmenu"
button2action="BspwmWindowMenu"
button3action="BspwmDesktopMenu"
button4action="bspc desktop -f next"
button5action="bspc desktop -f prev"
EOL
fi
. $HOME/.rootmenurc

#monitor events with xev and act accordingly
xev -root -event button | awk -v b1="$button1action" -v b2="$button2action" -v b3="$button3action" -v b4="$button4action" -v b5="$button5action" '
BEGIN { RS=""; }
/ButtonPress/ {
   switch(+$20) {
	 case "1": system(b1); break;
	 case "2": system(b2); break;
	 case "3": system(b3); break;
	 case "4": system(b4); break;
	 case "5": system(b5); break;
   }
}'
