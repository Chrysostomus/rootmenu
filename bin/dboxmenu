#!/bin/sh
#
###
if ! [ -f "$HOME/.dmenurc" ]; then
	cp /usr/share/dmenu/dmenurc $HOME/.dmenurc
fi
. $HOME/.dmenurc


eval $(xdotool getmouselocation --shell)
menu_widht=200
monitor_widht=$(wattr w $(lsw -r))
monitor_height=$(wattr h $(lsw -r))
lines=14
menu_height=$(( $lines * 23 ))
maxx=$(( $monitor_widht - $menu_widht ))
miny=$PANEL_HEIGHT
maxy=$(( $monitor_height - $menu_height ))
XP=$X
[ $XP -gt $maxx ] && XP=$maxx
YP=$Y
[ $YP -lt $miny ] && YP=$miny
[ $YP -gt $maxy ] && YP=$maxy

#DMENU='dmenu $DMENU_OPTIONS'
choice=$(echo -e "Run\nTerminal\nFiles\nBrowser\nEditor\nPackageManager\nKeybinds\nExit" | rofi -config "~/.config/rofi/config-monocle.rasi" -theme-str "#window { location: northwest; border: 0; width: 350; x-offset: ${XP}px; y-offset: ${YP}px;}" -dmenu -p "run")

case "$choice" in
  Run) exec dboxrun & ;;
  Terminal) exec default-terminal & ;;
  Files) xdg-open ~ & ;;
  Browser) exec $BROWSER & ;;
  Editor) exec $GUI_EDITOR & ;;
  PackageManager) exec default-terminal -e pacui & ;;
  Keybinds) exec xdg-open .config/sxhkd/sxhkdrc & ;;
  Exit) dlogoutmenu & ;;
esac
